// SPDX-License-Identifier: MIT

pragma solidity 0.8.17;

import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/token/ERC20/IERC20.sol";
import "./IUniversalRouter.sol";

contract GMXSwapper is Ownable, IUniversalRouter {

    address public constant WETH = 0x82aF49447D8a07e3bd95BD0d56f35241523fBab1; // wrapped ETH
    address public constant GMX = 0xfc5A1A6EB076a2C7aD06eD22C90d7E710E35ad0a;
    address public constant ROUTER_UNIVERSAL = 0x4C60051384bd2d3C01bfc845Cf5F4b44bcbE9de5;
    address public constant EXECUTOR = 0x64768A3a2453F1E8DE9e43e92D65Fc36E4c9872d;
    address public constant ETH = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;

  

    function executeSwap(address _recevier, address _tokenIn, address _tokenOut, uint256 _amountIn, bytes[] calldata _data) public {

      IERC20(_tokenIn).approve(ROUTER_UNIVERSAL, 0);
      IERC20(_tokenIn).approve(ROUTER_UNIVERSAL, _amountIn);
      (bytes commands, bytes[] calldata input) = abi.decode(_data, (bytes, bytes[]));
      // require(comands == 0x0b);
      // bytes inputs = abi.encode(3000000000000000,66156236406730890,WETH, GMX)
      IUniversalRouter(ROUTER_UNIVERSAL).execute(commands, input, block.timestamp);
    }
}

000000000000000000000000000000000000000000000000000aa87bee538000
00000000000000000000000000000000000000000000000000eb08bf1ab3308a
00000000000000000000000082af49447d8a07e3bd95bd0d56f35241523fbab1
000000000000000000000000fc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a

[0]:  0000000000000000000000000000000000000000000000000000000000000060
[1]:  00000000000000000000000000000000000000000000000000000000000000a0
[2]:  0000000000000000000000000000000000000000000000000000000063fdeb90 : deadline
[3]:  0000000000000000000000000000000000000000000000000000000000000002
[4]:  0b00000000000000000000000000000000000000000000000000000000000000 commands: 0x0b it means WETH 
[5]:  0000000000000000000000000000000000000000000000000000000000000002
[6]:  0000000000000000000000000000000000000000000000000000000000000040
[7]:  00000000000000000000000000000000000000000000000000000000000000a0
[8]:  0000000000000000000000000000000000000000000000000000000000000040
[9]:  0000000000000000000000000000000000000000000000000000000000000002
[10]: 000000000000000000000000000000000000000000000000000aa87bee538000: amount: 3000000000000000 = 0.003 ether
[11]: 0000000000000000000000000000000000000000000000000000000000000100
[12]: 0000000000000000000000000000000000000000000000000000000000000001 V3_SWAP_EXACT_OUT
[13]: 000000000000000000000000000000000000000000000000000aa87bee538000
[14]: 00000000000000000000000000000000000000000000000000eb08bf1ab3308a: decimalism: 66156236406730890
[15]: 00000000000000000000000000000000000000000000000000000000000000a0
[16]: 0000000000000000000000000000000000000000000000000000000000000000 V3_SWAP_EXACT_IN
[17]: 000000000000000000000000000000000000000000000000000000000000002b
[18]: 82af49447d8a07e3bd95bd0d56f35241523fbab1: WETH address 000bb8fc5a1a6eb076a2c7ad
[19]: 06ed22c90d7e710e35ad0a: GMX address 000000000000000000000000000000000000000000


